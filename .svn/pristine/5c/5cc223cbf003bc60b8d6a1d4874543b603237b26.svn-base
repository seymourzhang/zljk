<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>

<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<%@ include file="../../framework/inc.jsp"%>
<link rel="stylesheet" href="<%=path %>/framework/css/datepicker.css" />

<script type="text/javascript" src="<%=path%>/framework/js/charts/highcharts.js"></script>
<script type="text/javascript" src="<%=path%>/framework/js/charts/exporting.src.js"></script>
<script type="text/javascript" src="<%=path%>/modules/report/js/alarmHist.js"></script>
</head>
<script>
var xNames = new Array();//X坐标

var alarmNum = new Array();
var alarmNum1 = new Array();
var alarmNum2 = new Array();
var alarmNum3 = new Array();

<c:forEach items="${AlarmHist }" var="alarm">
xNames.push('${alarm.time }点');
	<c:choose>
	  <c:when test="${alarm.house_id == 1}">
	    alarmNum.push(${alarm.alarm_num});
	  </c:when>
	  <c:when test="${alarm.house_id == 2}">
	  alarmNum1.push(${alarm.alarm_num});
	  </c:when>
	  <c:when test="${alarm.house_id == 3}">
	  alarmNum2.push(${alarm.alarm_num});
	  </c:when>
	  <c:when test="${alarm.house_id == 4}">
	  alarmNum3.push(${alarm.alarm_num});
	  </c:when>
	<c:otherwise>
	 alarmNum.push(${alarm.alarm_num});
	 alarmNum1.push(${alarm.alarm_num});
	 alarmNum2.push(${alarm.alarm_num});
	 alarmNum3.push(${alarm.alarm_num});
	</c:otherwise>
	</c:choose>
</c:forEach>
</script>

<body style="background-color: #ffffff;">
			<div id="page-content" class="clearfix"  style="padding-top: 10px;"> 
				<div class="row-fluid" style="background-color: #ffffff;">
					<form  method="post" style="background-color: #ffffff;">
					  <div class="span12">
							<!-- BEGIN PORTLET-->
							<div class="portlet box blue1">
								<div class="portlet-title">
									<div class="caption">
										<i class="icon-reorder"></i>检索条件
									</div>
									<!-- <div class="actions">

										<a href="javascript:;" class="btn green"><i class="icon-search"></i> 查询</a>

									</div> -->

								</div>
								<div class="portlet-body form1">
									<!-- BEGIN FORM-->
									<div class="form-horizontal" style="height: 40px;">
										<div style="height: 20px;">
											<div class="span3">
												<div class="control-group">
													<label class="control-label" style="width: 50px;">农场</label>
													<div class="controls" style="margin-left: 55px;">
														<select id="farmId" class="m-wrap span12" tabindex="1" name="farmId" >
<!-- 															<option value="">全部</option>  -->
			                                                 <c:if test="${!empty farmList}">
			                                                 <c:forEach var="farm" items="${farmList}">
			                                                 <option value="${farm.id }">${farm.farm_name_chs }</option>
			                                                 </c:forEach>
		                                                 </c:if>
														</select>
													</div>
												</div>
											</div>

											<!--/span-->

											<div class="span3">

												<div class="control-group">
													<label class="control-label" style="width: 30px;">栋舍</label>
													<div class="controls" style="margin-left: 35px;">
														<select id="houseId" class="m-wrap span12" tabindex="1" name="houseId">
<!-- 															<option value="">全部</option>  -->
			                                                 <c:if test="${!empty houseList}">
			                                                 <c:forEach var="house" items="${houseList}">
			                                                 <option value="${house.id }">${house.house_name}</option>
			                                                 </c:forEach>
			                                                 </c:if>
														</select>
													</div>
												</div>

											</div>

											<!--/span-->

											<!--/span-->
											<div class="span3">
												<div class="control-group">
													<label class="control-label" style="width: 60px;">报警类型</label>
													<div class="controls" style="margin-left: 70px;">
														<select id="alarmName" class="m-wrap span12" tabindex="1"  name="alarmName">
															<option value="">全部</option> 
                                                            <c:if test="${!empty alarmNameList}"> 
			                                                 <c:forEach var="alarm" items="${alarmNameList}">
			                                                 <option value="${alarm.biz_code}">${alarm.code_name}</option>
			                                                 </c:forEach>
			                                                 </c:if> 
														</select>
													</div>
												</div>
											</div>

											<!--/span-->
											<!--/span-->

											<div class="span3">

												<div class="control-group">

													<label class="control-label" style="width: 30px;">日期</label>

													<div class="controls" style="margin-left: 35px;">
														<div class="input-append date date-picker" data-date-format="mm/yyyy" data-date-viewmode="years" data-date-minviewmode="months">

															<input class="m-wrap  span11 m-ctrl-medium date-picker " readonly type="text" name="queryTime" id="queryTime" /><span class="add-on"><i class="icon-calendar"></i></span>
			
														</div>

													</div>

												</div>

											</div>

											<!--/span-->

										</div>

									</div>

									<!-- END FORM-->
									
								</div> 

							</div>

							<!-- END PORTLET-->

							<div class="portlet box blue1">
								<div class="portlet-title">
									<div class="caption">
										<i class="icon-globe"></i>报警历史统计
									</div>
								</div>

								<div class="portlet-body" id="user_date_table">
									<input type="hidden" name="buttonValue" id="buttonValue">
									<div id="container" class="form-horizontal" ></div>
									<div class="portlet-body form1"> 
										<div class="span4">
											<div class="control-group" style="padding-left: 100px;">
												<input type="button"  style="width: 80px;" value="近一个月" onclick="javascript:buttonMonth();">
											</div>
										</div>
										<div class="span4">
											<div class="control-group" style="padding-left: 100px;">
												<input type="button"  style="width: 80px;" value="近一周" onclick="javascript:buttonWeek();">
											</div>
										</div>
										<div class="span4">
											<div class="control-group" style="padding-left: 100px;">
												<input type="button"  style="width: 80px;" value="当日" onclick="javascript:buttonDay();">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div> 
		 </div> 
<script type="text/javascript" src="<%=path%>/js/bootbox.min.js"></script>
<script type="text/javascript" src="<%=path %>/framework/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="<%=path %>/framework/js/bootstrap-datepicker.zh-CN.js"></script>
</body>
</html>
