<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%--
  Created by IntelliJ IDEA.
  User: Ants
  Date: 2016/9/2
  Time: 11:14
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>
<html>
<head>
    <meta charset="utf-8" />
    <%@ include file="../../framework/inc.jsp"%>
    <script type="text/javascript" src="<%=path%>/framework/js/extJquery.js"></script>
    <script type="text/javascript" src="<%=path%>/modules/monitor/js/monitor.js"></script>
    <script type="text/javascript" src="<%=path%>/modules/monitor/js/monitorSet.js"></script>
    <title></title>
</head>
<script>
var flag = false;
var houseId = "${pd.house_id}";
$(document).ready(function () {
    var v = document.getElementsByName("checkFarmId");
    var f = "${farmIdGroup}";
	var farms;
	farms = f.split(",");
	if (farms.length <= 1){
		farms = f.split("");
	}
    for (var a = 0; a < v.length; ++a){
        if (farms[a] == v[a].value){
            v[a].checked = true;
        }
    }
    checkSelect();
    var zz = document.getElementsByName("checkHouseId");
	var aa = "${houseIdGroup}";
	var houses;
	houses = aa.split(",");
	if (houses.length <= 1){
		houses = aa.split("");
	}
	for (var cc = 0; cc < houses.length; ++cc) {
		for (var b = 0; b < zz.length; ++b) {
			if (houses[cc] == zz[b].value) {
				zz[b].checked = true;
			}
		}
	}
})
function checkSelect() {
    var oc = document.getElementsByName("checkFarmId");
    $("#houseId li").remove();
    for (var i = 0; i < oc.length; ++i) {
        if (oc[i].type == 'checkbox' && oc[i].checked == true) {
            getHouse(oc[i].value, oc[i].getAttribute("data"));
        }
    }
}
</script>
<body style="background-color: #ffffff;">
	<%--引用跳转页面方法:siMenu()--%>
	<script type="text/javascript" src="/zljk/framework/js/head.js"></script>
	<%--引用结束--%>
	<!--  <div class="container-fluid" id="main-container" style="background-color: #ffffff;"> -->
	<div id="page-content" class="clearfix" style="padding-top: 10px;">
		<div class="row-fluid" style="background-color:#ffffff;">
			<form id="farmData" method="post" style="background-color: #ffffff;">
				<%-- <input type="hidden" name="id" value="${pd.id}">
						<input type="hidden" name="pid" value="${pd.pid}"> --%>
				<div class="span12">
					<!-- BEGIN PORTLET-->
					<div class="portlet box blue1">
								<div class="portlet-title">
									<div class="caption">
										<i class="icon-reorder"></i>检索条件
									</div>
									<!-- <div class="actions">

										<a href="javascript:;" class="btn green"><i class="icon-search"></i> 查询</a>

									</div> -->

								</div>

								<div class="portlet-body form1" id="monitorExpandForm">
									<!-- BEGIN FORM-->
									<div class="form-horizontal" style="height: 40px;">
										<div style="height: 20px;">
											<div class="span4">
												<div class="control-group">
													<label class="control-label" style="width: 60px;">农场</label>
													<div class="controls" style="margin-left: 65px;">
                                                        <form id="farmId" name="farmId" method="get">
                                                            <c:if test="${!empty farmList}">
																<li>
                                                                    <c:forEach var="farm" items="${farmList}">
                                                                        <td><input id="checkFarmId" name="checkFarmId" type="checkbox" value="${farm.id}" onchange="checkSelect();" data="${farm.farm_name_chs}"/>${farm.farm_name_chs}</td>
                                                                    </c:forEach>
																</li>
                                                            </c:if>
                                                        </form>
													</div>
												</div>
											</div>
                                        </div>
                                </div>
							</div>
                            </div>

                            <div class="portlet box blue1">
								<div class="portlet-title">
									<div class="caption">
										<i class="icon-reorder"></i>栋舍
									</div>
									<!-- <div class="actions">

										<a href="javascript:;" class="btn green"><i class="icon-search"></i> 查询</a>

									</div> -->

                                </div>
                                	<!--/span-->
                                 <div class="portlet-body form1" id="monitorExpandForm1">
                                    <div class="form-horizontal" style="height:340px;">

											<div class="span4">

												<div class="control-group">

													<label class="control-label" style="width: 60px;"></label>

													<div class="controls" style="margin-left: 65px;">

														<farm id="houseId" name="houseId" action="getHouse();" method="get">

														</farm>
													</div>
												</div>
											</div>
											<!--/span-->
										</div>
									</div>
                                </div>
									<!-- END FORM-->
					<button type="button" onclick="saveSet();">保存</button>
					<!-- END PORTLET-->
				</div>
			</form>
		</div>
	</div>
	<!-- #main-content -->
	<!-- </div>  -->
	<script type="text/javascript" src="<%=path%>/js/bootbox.min.js"></script>
	<!-- 确认窗口 -->
</body>
</html>
